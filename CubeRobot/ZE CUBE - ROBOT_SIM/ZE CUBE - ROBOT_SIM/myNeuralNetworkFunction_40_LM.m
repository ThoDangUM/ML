function [y1] = myNeuralNetworkFunction_40_LM(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 03-Jun-2022 17:05:50.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = 3xQ matrix, input #1
% and returns:
%   y = 4xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-16.24;-16.24;-20];
x1_step1.gain = [0.061576354679803;0.061576354679803;0.05];
x1_step1.ymin = -1;

% Layer 1
b1 = [162.59979287560548755;-6.7208780709188644664;-7.4236892204346345281;-153.42756264198379768;169.08505727838803523;-106.82048285824363631;7.5052514962584844227;0.3613634552326815963;4.8260053635855637566;4.2170065419912647897;-6.6197089184663324701;0.99132434060942509202;-3.6239702026649962541;1.0642820043958001186;-6.1649615758981335389;0.4365253221839341391;-0.52714393166292727866;0.64799805962298795414;0.39097195042651611274;0.083867587993485356868;0.52645889296510173239;-0.64575887502074735824;-0.47415190866630890776;-0.78547266605782584126;0.44025707345975523266;0.72622353353832103107;0.78575572652516445515;-3.8155123475621390838;-6.4561341174483048988;-1.2592693968865771303;1.2297866540770934218;-5.1935989375844879845;73.852018416191768324;3.3179778427787347539;4.1608546421004390936;-0.76214454069768822198;-124.053832645072589;-149.65201735320277976;182.7499490211176294;-3.5453713617272857306];
IW1_1 = [-1.433405553520570086 0.80079573323032948728 161.95243915147153757;-1.2501927417439822054 -1.1750092630611996825 7.1666876435241029242;-0.20664157706112673552 0.89044696856779581573 -7.1100880308912968175;1.0249279004590357012 -0.890466021859685819 -152.29290615360699235;-1.1438907417167467617 -0.082288617237488093092 -169.05957342343455707;1.4158735678064786612 1.2865828131083159036 104.98429737320840616;-1.1129668973536475107 0.87960665081382571895 7.476826567285109526;-0.0016350067731643598383 -0.0064472725141619226588 0.38806260275121584602;-1.596210846113389259 0.72442801413269519717 -5.5156915822229191093;-1.2585863037936451114 0.99057379091405439731 -4.8226193253177846998;0.71818102719521048627 0.7405444435062591424 -7.4326616525886324283;-0.48671348229541538943 -0.063959891475538752093 0.65230646718117957228;-0.40108428005178159426 -0.32379084088972293065 -4.8295473584165673486;-0.5526479967470447896 -0.13700090282027452271 1.4304836715306243899;1.1434024928437245272 -0.46942037681039178176 -6.0896433385849109143;-2.6580379710949397776 -2.8536781435445344179 -0.17294911729188422456;1.4385620332170676594 -0.94750590163824210954 1.3009311467019535336;11.039879341863747086 -10.930306102872554774 0.53259495181956295617;0.20689126382178030239 -0.33491710332474500245 -1.3881158472541914595;-0.11615281836767051005 -0.34273067764933107249 1.2966630897160116298;-3.0052190358777433055 -3.1753936880730981862 0.21558066815473544975;-11.068898506829761175 10.936486436900644037 -0.4801257392865183049;2.8009856247718589728 2.9815566294601221209 -0.021873682482554477474;-11.018831781619123689 -11.705722698273451243 -0.73123417063811557703;0.23214281510712475587 -0.26530425956324243941 0.92338672616956851691;-0.35595952979863249022 -0.13033394708206028079 -0.78750731322129774448;10.937459106964320554 11.623371262735389564 0.68772582868030507353;-0.92647142399576420946 0.81033527069687305566 4.3204789975767452503;-1.3641394532286803543 -0.96009272365451281406 6.9002036773610386788;-6.265853699130355281 5.8675423241850834799 0.83894757121814711454;6.1810947681172638823 -5.7897887392518105898 -0.85958023763627056102;1.744165174256048445 -0.52655131483898620637 5.8983379692344097833;8.4397237764314709807 -10.622698612330905732 72.253498808478724413;0.63525121938752793227 -0.99814255582294630909 -3.8073370593975845999;0.092771125231556089696 -0.50813089019790080858 3.6360682057420228297;-0.7086715679680372082 0.48258869161797940395 -0.36066500444377930235;0.99172873318640886176 0.65139760368196164553 123.11031743356122092;1.0902829605397899027 0.33116867650266124112 149.3558414351983572;0.084258600583180409682 1.0738979535301484969 180.96828385119781046;-0.53101418705597436265 -0.10143153836989664274 -4.5541775548609058077];

% Layer 2
b2 = [29.892760891558626923;12.869981337228342255;13.623550921890922538;14.558407047342548424];
LW2_1 = [7.0826631137159843377 -13.766050890573970023 22.470788857472193456 22.590453773651795188 -3.2851498089947699377 27.806032931811312636 -14.273733464725372855 -31.335390759047729858 7.9248998151463903028 -3.4830745661470015051 5.7477398411994080618 -66.526969053877252236 -1.4934306132808621292 35.22129817819308073 -25.727599363652245756 9.0105046057594577746 1.0579284471721064342 -3.3343661526070196288 -13.458342117419755724 13.238350472859790941 7.8258913061272892264 -3.3934708110182363328 16.974845111452257385 -2.5332345556997770686 -27.411935055724605093 13.655801876328654387 -2.5643536901612700163 -19.532330563945070168 16.575144586325126994 -5.7235762823718161485 -5.7960402630157874526 5.7361691561459213773 0.20772395311374552973 -19.79833732260037138 53.905366783617466808 -13.726233689809326677 3.4733521316597482098 -7.9795463787938523126 16.384315567043884698 6.632092276615080273;11.912482979343351985 9.7039222294970066685 -4.3168985485084094833 29.610950003937237085 20.010202023520584191 61.311985471547394866 18.15756329481082787 -26.901689011401320073 -33.004596916086896385 12.369303089884969182 -2.2210866075273201226 70.921405532613462697 4.7086367592966382745 -31.868424325197999281 30.183199729332439887 -8.7180403820989340602 -1.0693275289338108891 2.3934546104394667232 12.687371695500273105 -10.296192462876174289 -7.3323009698228585052 2.4497753694082637921 -16.195195579651432638 2.5350478673008067787 35.750622254248284548 -24.343386074404904207 2.5738731408858921412 9.6057850768540067321 -10.34979453171790631 6.2274537648952543734 6.2954341821254740097 -21.719059729925270119 -0.11552318134092917634 11.94044860560500787 -2.7363902508942543612 15.269010405423911081 -83.511944590189258975 53.590299820847434376 4.6045880261719194237 -6.9882484011270333824;-20.389432187434405108 -17.846875902827825655 15.84632745951648225 -61.967029976610191966 -14.69608628551188545 11.028941262921181377 -11.535159853821468801 48.641739679612300051 41.968319116059440432 -20.604201401190270104 1.3120533269635927809 -53.830946119634099034 -17.428839337431604406 23.656099266965327388 -20.655543761311985662 7.9798939914566497933 1.2556127160895911299 -2.1702508565617595337 -5.3350045029783519368 12.829324515426650422 6.5321834963811333807 -2.2276022019245829142 14.683422417194050169 -1.8642975791388145534 -42.233840477533298952 19.681742260017418999 -1.9188318323207056437 -4.9190479516900076362 18.8158043364001486 -6.4076143214657390601 -6.4706313940369728499 23.496428267925537625 0.005881624261204040395 -4.6174520660999682775 33.273166402973174627 -14.381930292742046262 15.402130020418629996 -26.916009914635772304 -53.446110650730972225 24.510164456123604282;-6.9684144841943194137 20.547209055339806127 -31.448608614341452494 -14.972825965563673734 -19.006579190963805104 -27.385268085196798893 7.5117269747303696548 7.9027284482813273669 -17.979463529921723364 11.892948837849800725 -4.5724871257522892165 44.964852945718583044 13.267338822772360984 -24.763441565705957004 15.548017909733985675 -10.113813374092215369 -1.151231712494847903 2.7072264261806564534 5.5637982903405198698 -15.108761571898620346 -9.0139031289655040524 2.7819283963110232882 -19.324355903985388494 3.7238533080481568405 31.390602864978312425 -7.514350613911513932 3.7849759144476839978 13.268500349626100032 -23.587524517429432791 7.4837409959983522967 7.5666190512354392084 -8.4155870431275392463 -0.0028946242366201663243 10.829954375763108487 -79.264208127055596265 11.76377936803081603 56.842240659246648704 -45.362297183553742741 0.0049071113806580836381 -22.649839204760084499];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.01;0.01;0.01;0.01];
y1_step1.xoffset = [-100;-100;-100;-100];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
